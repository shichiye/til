# 事件循环

JavaScript是一门单线程语言，即意味着所有的任务需要排队。为了解决单个任务执行时间过长的问题，JavaScript中出现了同步和异步，它们的本质区别是执行顺序的不同。

* 同步任务：即主线程上的任务，按照顺序由上至下依次执行。
* 异步任务：进入任务队列的任务，执行完毕后会产生一个回调函数，并通知主线程。当主线程上的任务执行完后，会调用最早通知自己的回调函数，进入主线程执行。

## 事件循环 `Event Loop` 概念介绍
事件循环指的是JS代码所在运行环境（浏览器或NodeJS）编译器的一种解析执行规则，属于JS编译器的范畴，而不属于JS代码本身。

## 微任务和宏任务

微任务：
  1. Promise的then回调
  2. Mutation Observer API
  3. queueMicrotask()
  4. process.nextTick(NodeJS)

宏任务：
  1. Ajax
  2. setTimeout
  3. setInterval
  4. 事件
  5. script
  6. 文件I/O

## 事件循环机制

1. 进入到script标签，就进入到了第一次事件循环
2. 遇到同步代码，立即执行
3. 遇到宏任务，放到宏任务队列里
4. 遇到微任务，放到微任务队列里
5. 执行完所有同步代码
6. 执行微任务
7. 寻找下一个宏任务，重复步骤1
   1. 以此反复直到清空所有宏任务
